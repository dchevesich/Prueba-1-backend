{% extends 'store/main.html' %}
{% load static %}

{% block title %}Detalle de {{ producto.nombre }}{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8">
    {% if error_message %}
        <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4" role="alert">
            <strong class="font-bold">¡Error!</strong>
            <span class="block sm:inline">{{ error_message }}</span>
        </div>
        <a href="{% url 'store' %}" class="block text-center mt-4 text-blue-600 hover:text-blue-800 font-semibold">Volver a la Tienda</a>
    {% elif producto %}
        <div class="bg-white rounded-lg shadow-lg overflow-hidden md:flex">
            {# Sección de la imagen #}
            <div class="md:w-1/2 p-6 flex items-center justify-center">
                {% if producto.imagen %}
                    <img class="max-w-full max-h-96 object-contain" src="{{ producto.imagen.url }}" alt="{{ producto.nombre }}">
                {% else %}
                    <img class="max-w-full max-h-96 object-contain" src="{% static 'images/placeholder.jpg' %}" alt="Imagen no disponible">
                {% endif %}
            </div>

            {# Sección de los detalles #}
            <div class="md:w-1/2 p-6 flex flex-col justify-between">
                <div>
                    <h1 class="text-4xl font-bold text-gray-900 mb-4">{{ producto.nombre }}</h1>
                    <p class="text-gray-600 mb-4 text-lg">Categoría: {{ producto.categoria.nombre }}</p>
                    <p class="text-gray-700 mb-6 text-base">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
                    
                    <div class="flex items-center mb-4">
                        <span class="text-3xl font-bold text-gray-900 mr-4">Bs. {{ producto.precio }}</span>
                        {% if producto.stock > 0 %}
                            <span class="text-green-600 font-semibold">En Stock: {{ producto.stock }} unidades</span>
                        {% else %}
                            <span class="text-red-600 font-semibold">Sin Stock</span>
                        {% endif %}
                    </div>
                </div>

                <div class="mt-6">
                    <button 
                        data-product="{{ producto.id }}" 
                        data-action="add" 
                        class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg text-lg transition duration-300 w-full update-cart">
                        Añadir al Carrito
                    </button>
                    <a href="{% url 'store' %}" class="block text-center mt-4 text-blue-600 hover:text-blue-800 font-semibold">Volver a la Tienda</a>
                </div>
            </div>
        </div>
    {% else %}
        <p class="text-gray-600 text-center">No se pudieron cargar los detalles del producto.</p>
        <a href="{% url 'store' %}" class="block text-center mt-4 text-blue-600 hover:text-blue-800 font-semibold">Volver a la Tienda</a>
    {% endif %}
</div>
{% endblock %}